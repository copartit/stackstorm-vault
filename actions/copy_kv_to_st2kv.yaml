---
name: copy_kv_to_st2kv
runner_type: python-script
description: >-
  Read a kv value from Vault server and copy it (encrypted) to ST2 datastore.
  In workflows, use <% st2kv(system.<st2kv_key>, decrypt=>true) %> to retrieve it safely.
enabled: true
entry_point: "copy_kv_to_st2kv.py"
parameters:
  st2kv_key:
    required: True
    type: string
  st2kv_ttl:
    type: integer
    description: "Optional TTL for the value in the ST2 Datastore"
    required: False
  path:
    type: string
    description: "Key to read from Vault"
    required: true
    position: 0
  kv_version:
    type: number
    description: "The version of the KV store in vault.  Use 1 for legacy kv stores, 2 for newer kv stores"
    required: true
  mount_point:
    type: string
    description: "The mount point of the kv store"
    required: true
    default: "secret"
  version:
    type: string
    description: "The version of the kv *data*"
    required: true
    default: '1'
  profile:
    type: string
    description: "Name of connection profile (in pack config) to use to connect to vault. Default profile defined in pack config."
    required: false
